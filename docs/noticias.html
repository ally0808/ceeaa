<!DOCTYPE html>
<html lang="es">
<head>
  <link rel="icon" href="https://scontent.fagu3-1.fna.fbcdn.net/v/t39.30808-6/342176173_203975092380751_2564658307533656109_n.jpg?_nc_cat=107&ccb=1-7&_nc_sid=6ee11a&_nc_eui2=AeGCsh4LPU5lb0uSBXjHr8vgqUarP4JuhpKpRqs_gm6GkgUzNds1ZTuDURIkSdmvhcvuxet8JhLjx_G7mtrsXci2&_nc_ohc=Od4HmQ8VYZQQ7kNvwHeuOZ9&_nc_oc=AdmfWsfrh16l9-tGCIYy9jdmDD6FCR4jw8p5F4ZYgPpUgwgi5JtCf5IvJjfxSyIKevYYr2Mc_ACB1C3ki5HF64pi&_nc_zt=23&_nc_ht=scontent.fagu3-1.fna&_nc_gid=rk-P2vIcwM96rmfYvbfCcQ&oh=00_AfNlr-aM_cZKnzGMXTPvmzyByL0BuOQD7F21dE_2hw2kaQ&oe=685BCA14" type="image/png" />
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CEEA - Noticias y Actualizaciones</title>
  <link rel="stylesheet" href="noticias.css">
  <link rel="stylesheet" href="menu.css">
</head>
<body>
  <!-- NAVBAR -->
  <nav class="navbar-bg">
    <div class="navbar-mini-container">
      <button class="menu-toggle" id="menuToggle" aria-label="Abrir menú">&#9776;</button>
      <ul class="nav-list" id="navbarList">
        <li><a href="index.html">Home</a></li>
        <li><a href="objetivos.html">Objetivos</a></li>
        <li><a href="comites.html">Comités</a></li>
        <li><a href="noticias.html" class="active">Noticias</a></li>
        <li><a href="galeria.html">Galería</a></li>
        <li><a href="contacto.html">Contacto</a></li>
      </ul>
    </div>
  </nav>

  <main>
    <h2 class="objetivos-titulo-contenedores">Noticias y Actualizaciones</h2>
    <section id="lista-noticias"></section>
  </main>

  <!-- Botón de subir -->
  <button id="btn-subir" title="Ir arriba">&#8679;</button>

  <!-- FOOTER igual al de INICIO -->
  <footer>
    <div class="footer-bar">
      <div class="footer-logos">
        <img src="https://scontent.fagu3-1.fna.fbcdn.net/v/t39.30808-6/277764273_100534895972778_4399351863634102879_n.png?_nc_cat=108&ccb=1-7&_nc_sid=6ee11a&_nc_eui2=AeGPCsI6H_BO43FMoQjV03EdsWcdciMr1o2xZx1yIyvWjfcpZn7KAjGGg_LiriOwIrnkkAE9SjDtVzaNpBo-KUFu&_nc_ohc=za9ZnLYxdloQ7kNvwHd0Y-x&_nc_oc=AdnciybW1-VvlH1T8gnGj-A9hkCZd9aOQmxxGQ00wubaKUQh-4So_wMnI5htI4cFES28jN2DplIRnlLMi1lBFW8s&_nc_zt=23&_nc_ht=scontent.fagu3-1.fna&_nc_gid=ugEdAubbrxfqBZln6kOyhg&oh=00_AfMDCB8c5NN6AZRw90vDnob_v7n8vil9qKppDYn2y-2W2w&oe=685A5478" alt="AGS EI" class="logo-ags">
        <img src="https://static.wixstatic.com/media/e26601_938afa7daacc48428d7f81b7327da453~mv2.png/v1/crop/x_0,y_1,w_390,h_184/fill/w_108,h_54,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/White%20investel.png" alt="Investel" class="logo-investel">
      </div>
      <div class="footer-text">
        2025 Consejo Estatal Empresarial de Aguascalientes &copy;
      </div>
    </div>
  </footer>

  <script src="menu.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const lista = document.getElementById('lista-noticias');
      lista.innerHTML = "<p style='color:#222; text-align:center;'>Cargando noticias...</p>";

      fetch('https://ceeaa-backend.onrender.com/api/noticias')
        .then(res => {
          if (!res.ok) throw new Error('Error de red');
          return res.json();
        })
        .then(data => {
          lista.innerHTML = "";
          if (!Array.isArray(data) || data.length === 0) {
            lista.innerHTML = "<p style='color:#222; text-align:center;'>No hay noticias disponibles.</p>";
            return;
          }
          data.forEach(noticia => {
            const section = document.createElement('section');
            section.classList.add('noticia');
            const soloFecha = noticia.fecha_publicacion ? noticia.fecha_publicacion.toString().slice(0,10) : '';
            section.innerHTML = `
              <h2>${noticia.titulo}</h2>
              <small>${soloFecha}</small>
              <p>${noticia.contenido}</p>
            `;
            lista.appendChild(section);
          });

          // Animación de aparición
          const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                entry.target.classList.add('visible');
                observer.unobserve(entry.target);
              }
            });
          }, { threshold: 0.2 });

          document.querySelectorAll('.noticia').forEach(n => observer.observe(n));
        })
        .catch(err => {
          lista.innerHTML = "<p style='color:#c00; text-align:center;'>No se pudieron cargar las noticias.</p>";
        });

      // Código para el botón de subir
      const btnSubir = document.getElementById('btn-subir');
      window.addEventListener("scroll", function() {
        if (window.scrollY > 200) {
          btnSubir.style.display = "block";
        } else {
          btnSubir.style.display = "none";
        }
      });
      btnSubir.addEventListener("click", function() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    });
  </script>
</body>
</html>